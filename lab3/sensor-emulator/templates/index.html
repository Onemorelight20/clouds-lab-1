<!DOCTYPE html>
<html>
<head>
    <title>IoT Sensor Emulator</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
    <div class="container mt-4">
        <h1 class="display-4">IoT Sensor Emulator</h1>

        <h2 class="mt-4">Sensor Configurations</h2>
        <form method="POST" class="mb-4">
            <div class="mb-3">
                <label for="sensor_type" class="form-label">Sensor Type:</label>
                <select name="sensor_type" class="form-select" required>
                    <option value="temperature">Temperature</option>
                    <option value="humidity">Humidity</option>
                    <option value="light">Light</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="frequency" class="form-label">Frequency (ms):</label>
                <div class="row">
                    <div class="col-md-6">
                        <input type="range" name="frequency" class="form-range" min="20" max="100" step="5" id="frequencySlider" required>
                    </div>
                    <div class="col-md-6">
                        <span id="frequencyValue" class="d-inline-block"></span> ms
                    </div>
                </div>
            </div>
                     

            <div class="mb-3">
                <label for="data_address" class="form-label">Data Address:</label>
                <input type="text" name="data_address" class="form-control" value="{{ sqs_queue_url }}" required>
            </div>

            <button type="submit" class="btn btn-primary">Start Emulation</button>
        </form>

        <h2 class="mt-4">Current emulations</h2>
        <div class="row row-cols-1 row-cols-md-2 g-4">
            {% for sensor_type, config in configurations.items() if not config['stop_flag'] %}
                <div class="col">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Sensor Type: {{ sensor_type }}</h5>
                            <p class="card-text">
                                Frequency: {{ config['frequency'] }} ms<br>
                                Data Address: {{ config['data_address'] }}
                            </p>
                            <form method="POST" action="/stop">
                                <input type="hidden" name="sensor_type" value="{{ sensor_type }}">
                                <button type="submit" class="btn btn-danger">Stop</button>
                            </form>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        
    </div>
    

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2"></script>
    <script>
        const frequencySlider = document.getElementById("frequencySlider");
        const frequencyValue = document.getElementById("frequencyValue");
    
        frequencySlider.addEventListener("input", () => {
            frequencyValue.textContent = frequencySlider.value;
        });
    </script>
    
</body>
</html>
